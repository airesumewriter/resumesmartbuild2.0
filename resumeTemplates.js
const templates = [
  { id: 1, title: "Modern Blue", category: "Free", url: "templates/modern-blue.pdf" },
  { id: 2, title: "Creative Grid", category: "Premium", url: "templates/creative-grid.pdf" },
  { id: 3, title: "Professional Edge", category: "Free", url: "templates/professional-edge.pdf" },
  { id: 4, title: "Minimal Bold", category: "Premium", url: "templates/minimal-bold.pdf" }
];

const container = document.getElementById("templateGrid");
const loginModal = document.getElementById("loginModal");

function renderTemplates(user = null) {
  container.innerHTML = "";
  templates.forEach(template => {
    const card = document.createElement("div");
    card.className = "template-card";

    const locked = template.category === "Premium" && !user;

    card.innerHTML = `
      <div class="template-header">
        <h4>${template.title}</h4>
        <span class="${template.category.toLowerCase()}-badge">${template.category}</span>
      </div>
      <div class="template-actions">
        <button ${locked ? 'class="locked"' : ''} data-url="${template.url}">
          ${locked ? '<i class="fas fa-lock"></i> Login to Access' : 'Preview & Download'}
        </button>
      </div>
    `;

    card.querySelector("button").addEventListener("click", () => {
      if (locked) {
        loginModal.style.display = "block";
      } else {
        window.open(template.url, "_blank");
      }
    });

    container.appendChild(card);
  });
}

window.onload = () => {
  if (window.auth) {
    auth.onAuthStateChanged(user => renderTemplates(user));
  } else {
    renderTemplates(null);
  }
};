// resumeTemplates.js
const templates = [
  { id: 1, title: "Modern Blue", category: "Free", url: "templates/modern-blue.pdf" },
  { id: 2, title: "Creative Grid", category: "Premium", url: "templates/creative-grid.pdf" },
  { id: 3, title: "Professional Edge", category: "Free", url: "templates/professional-edge.pdf" },
  { id: 4, title: "Minimal Bold", category: "Premium", url: "templates/minimal-bold.pdf" }
];

const container = document.getElementById("templateGrid");
const loginModal = document.getElementById("loginModal");

function renderTemplates(user = null) {
  container.innerHTML = "";
  templates.forEach(template => {
    const card = document.createElement("div");
    card.className = "template-card";

    const locked = template.category === "Premium" && !user;

    card.innerHTML = `
      <div class="template-header">
        <h4>${template.title}</h4>
        <span class="${template.category.toLowerCase()}-badge">${template.category}</span>
      </div>
      <div class="template-actions">
        <button ${locked ? 'class="locked"' : ''} data-url="${template.url}">
          ${locked ? '<i class="fas fa-lock"></i> Login to Access' : 'Preview & Download'}
        </button>
      </div>
    `;

    card.querySelector("button").addEventListener("click", () => {
      if (locked) {
        loginModal.style.display = "block";
      } else {
        window.open(template.url, "_blank");
      }
    });

    container.appendChild(card);
  });
}

window.onload = () => {
  if (window.auth) {
    auth.onAuthStateChanged(user => renderTemplates(user));
  } else {
    renderTemplates(null);
  }
};